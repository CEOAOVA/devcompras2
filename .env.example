# ============================================================================
# SUPABASE CONFIGURATION
# ============================================================================
# INSTRUCCIONES: Obtén estas credenciales de tu proyecto Supabase:
# 1. Ve a https://app.supabase.com
# 2. Selecciona tu proyecto
# 3. Settings > API
# 4. Copia los valores correspondientes

SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
SUPABASE_JWT_SECRET=your-jwt-secret-here
SUPABASE_SCHEMA=embler

# ============================================================================
# OPENROUTER API (GENAI MULTI-MODELO)
# ============================================================================
# INSTRUCCIONES: Obtén tu API key de OpenRouter:
# 1. Ve a https://openrouter.ai
# 2. Crea una cuenta o inicia sesión
# 3. Keys > Create Key
# 4. Copia la key (empieza con sk-or-v1-)

OPENROUTER_API_KEY=sk-or-v1-your-key-here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# Modelos disponibles en OpenRouter:
# - anthropic/claude-3.5-sonnet (recomendado para análisis)
# - openai/gpt-4-turbo-preview (recomendado para vision)
# - meta-llama/llama-3-70b-instruct (más económico)
DEFAULT_TEXT_MODEL=anthropic/claude-3.5-sonnet
DEFAULT_VISION_MODEL=openai/gpt-4-vision-preview

# ============================================================================
# OPENAI API (EMBEDDINGS + WHISPER STT)
# ============================================================================
# INSTRUCCIONES: Obtén tu API key de OpenAI:
# 1. Ve a https://platform.openai.com
# 2. Crea una cuenta o inicia sesión
# 3. API Keys > Create new secret key
# 4. Copia la key (empieza con sk-)

OPENAI_API_KEY=sk-your-openai-key-here

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Nota: Si usas Supabase, DATABASE_URL debe apuntar a tu instancia de Supabase
# Formato: postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres

DATABASE_URL=postgresql://postgres:your-password@db.your-project-ref.supabase.co:5432/postgres?schema=embler

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# ============================================================================
# JWT CONFIGURATION
# ============================================================================
# IMPORTANTE: Genera un secret aleatorio de al menos 32 caracteres
# Puedes usar: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-random-secret-at-least-32-characters-long-here
JWT_EXPIRES_IN=7d

# ============================================================================
# API CONFIGURATION
# ============================================================================
NODE_ENV=development
PORT=3001
HOST=0.0.0.0
LOG_LEVEL=info

# Frontend URL (para CORS)
FRONTEND_URL=http://localhost:3000

# ML Service URL
ML_API_URL=http://localhost:8001

# ============================================================================
# MCP SERVERS CONFIGURATION
# ============================================================================
MCP_SUPABASE_ENABLED=true
MCP_FILESYSTEM_ENABLED=true
MCP_GITHUB_ENABLED=false
MCP_ANALYTICS_ENABLED=true

# GitHub Token para MCP (opcional)
GITHUB_TOKEN=

# ============================================================================
# GOOGLE MAPS API (opcional)
# ============================================================================
GOOGLE_MAPS_API_KEY=

# ============================================================================
# FRONTEND ENV VARS (REACT_APP_)
# ============================================================================
REACT_APP_API_URL=http://localhost:3001
REACT_APP_ML_API_URL=http://localhost:8001
REACT_APP_SUPABASE_URL=https://your-project-ref.supabase.co
REACT_APP_SUPABASE_ANON_KEY=your-anon-key-here
REACT_APP_SUPABASE_SCHEMA=embler
REACT_APP_GOOGLE_MAPS_API_KEY=
REACT_APP_WS_URL=ws://localhost:3001/ws

# ============================================================================
# MONITORING (Opcional)
# ============================================================================
SENTRY_DSN=
GRAFANA_URL=
PROMETHEUS_PORT=9090

# ============================================================================
# RAG CONFIGURATION
# ============================================================================
# Embeddings Configuration
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_DIMENSIONS=512
EMBEDDING_CACHE_TTL=604800

# Embedding cache TTL (7 días en segundos)
RAG_SIMILARITY_THRESHOLD=0.7
RAG_TOP_K=10
RAG_CHUNK_SIZE=800
RAG_CHUNK_OVERLAP=200
RAG_MIN_CHUNK_SIZE=100

# ============================================================================
# STT (SPEECH-TO-TEXT) CONFIGURATION
# ============================================================================
STT_PROVIDER=openai-whisper
STT_MODEL=whisper-1
STT_LANGUAGE=es
STT_MAX_DURATION_SECONDS=300
STT_MAX_FILE_SIZE_MB=10

# ============================================================================
# FILE UPLOAD LIMITS
# ============================================================================
# Tamaños máximos por tipo de archivo
MAX_PDF_SIZE_MB=50
MAX_PDF_PAGES=100
MAX_IMAGE_SIZE_MB=10
MAX_AUDIO_SIZE_MB=10
MAX_CSV_SIZE_MB=10

# Límites por usuario
MAX_UPLOADS_PER_15MIN=10
MAX_DAILY_UPLOAD_SIZE_MB=500

# ============================================================================
# BULL QUEUE CONFIGURATION (Procesamiento Asíncrono)
# ============================================================================
BULL_REDIS_HOST=localhost
BULL_REDIS_PORT=6379
BULL_REDIS_PASSWORD=

# Configuración de workers
BULL_PDF_CONCURRENCY=2
BULL_IMAGE_CONCURRENCY=5
BULL_AUDIO_CONCURRENCY=3
BULL_EMBEDDING_CONCURRENCY=10

# Timeouts de procesamiento (en ms)
BULL_PDF_TIMEOUT=300000
BULL_IMAGE_TIMEOUT=60000
BULL_AUDIO_TIMEOUT=120000
BULL_EMBEDDING_TIMEOUT=30000
