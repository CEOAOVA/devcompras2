# ==============================================
# LLM ANALYTICS CONFIGURATION
# ==============================================

# OpenRouter API (para Claude 3.5 Sonnet y otros modelos LLM)
OPENROUTER_API_KEY=sk-or-v1-your-key-here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# Modelos LLM
OPENROUTER_ANALYTICS_MODEL=anthropic/claude-3.5-sonnet
ANALYTICS_INSIGHTS_MODEL=anthropic/claude-3-haiku
ANALYTICS_FALLBACK_MODELS=openai/gpt-4o,meta-llama/llama-3.1-70b

# ==============================================
# MICROSIP CONNECTOR CONFIGURATION
# ==============================================

# URL del servicio microsip-connector (Firebird database)
MICROSIP_CONNECTOR_URL=http://localhost:3001

# API Key para autenticarse con microsip-connector
# IMPORTANTE: Debe coincidir con el API_KEY en microsip-connector/.env
MICROSIP_API_KEY=change_me_in_production_to_secure_key

# ==============================================
# REDIS CONFIGURATION
# ==============================================

# Redis connection
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis connection URL alternativa (comentar si usas las anteriores)
# REDIS_URL=redis://localhost:6379

# ==============================================
# RATE LIMITING
# ==============================================

# Límite de queries por usuario
ANALYTICS_USER_RATE_LIMIT=50

# Ventana de tiempo para rate limit (en milisegundos)
# 3600000 = 1 hora
ANALYTICS_RATE_WINDOW_MS=3600000

# Tamaño máximo de cola de requests
ANALYTICS_MAX_QUEUE_SIZE=50

# ==============================================
# COST TRACKING
# ==============================================

# Presupuesto máximo por usuario por día (en dólares)
ANALYTICS_MAX_COST_PER_USER_DAY=10.00

# Costo por 1000 tokens (promedio para Claude 3.5 Sonnet)
# Input: $0.003, Output: $0.015 - Usando promedio
ANALYTICS_COST_PER_1K_TOKENS=0.003

# ==============================================
# CACHE CONFIGURATION
# ==============================================

# TTL para resultados de queries (en segundos)
# 3600 = 1 hora
ANALYTICS_RESULTS_CACHE_TTL=3600

# TTL para SQL generado (en segundos)
# 604800 = 7 días
ANALYTICS_SQL_CACHE_TTL=604800

# Versión de cache (cambiar si se modifica estructura)
ANALYTICS_CACHE_VERSION=v1

# ==============================================
# SECURITY LIMITS
# ==============================================

# Longitud máxima de pregunta del usuario (caracteres)
ANALYTICS_MAX_QUESTION_LENGTH=500

# Máximo número de filas a retornar por query
ANALYTICS_MAX_QUERY_ROWS=10000

# Timeout para queries (en milisegundos)
# 30000 = 30 segundos
ANALYTICS_TIMEOUT_MS=30000

# Máximo tokens permitidos en respuesta LLM
ANALYTICS_MAX_TOKENS=4000

# ==============================================
# CIRCUIT BREAKER
# ==============================================

# Número de fallos consecutivos antes de abrir circuito
ANALYTICS_CIRCUIT_THRESHOLD=5

# Tiempo de espera antes de intentar cerrar circuito (ms)
# 60000 = 1 minuto
ANALYTICS_CIRCUIT_TIMEOUT=60000

# ==============================================
# APPLICATION CONFIG
# ==============================================

# Environment
NODE_ENV=development

# Application URL (para OpenRouter)
APP_URL=http://localhost:3000

# API Gateway Port
PORT=3001

# Logging level
LOG_LEVEL=info

# ==============================================
# TRANSLATION SERVICE (si está habilitado)
# ==============================================

# Modelo para traducción
OPENROUTER_TRANSLATION_MODEL=x-ai/grok-2-1212

# Presupuesto máximo de traducción por día
TRANSLATION_MAX_COST_PER_USER_DAY=10.00

# ==============================================
# IMAGE ANALYZER (si está habilitado)
# ==============================================

# Modelo para análisis de imágenes
DEFAULT_VISION_MODEL=openai/gpt-4-vision-preview

# ==============================================
# DEVELOPMENT / DEBUG
# ==============================================

# Enable debug logs
DEBUG=false

# Enable SQL query logging
LOG_SQL_QUERIES=true

# Mostrar stack traces completos en errores
SHOW_ERROR_DETAILS=true
